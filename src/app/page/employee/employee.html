<div class="employee-container">

  <div class="header-section">
    <h2>üë®‚Äçüíº Employees</h2>

    <button *ngIf="!showForm"
      class="btn btn-add"
      (click)="showAddForm()">
      + Add New Employee
    </button>
  </div>

  <!-- =============================== -->
  <!-- EMPLOYEE FORM -->
  <!-- =============================== -->
  <form *ngIf="showForm" [formGroup]="employeeForm" class="emp-form">

    <div class="row g-3">

      <div class="col-md-6">
        <label>Employee Name</label>
        <input type="text" class="form-control" formControlName="name">
      </div>

      <div class="col-md-6">
        <label>Contact No</label>
        <input type="text" class="form-control" formControlName="contact">
      </div>

      <div class="col-md-6">
        <label>Email</label>
        <input type="email" class="form-control" formControlName="email">
      </div>

      <div class="col-md-6">
        <label>Parent Department</label>
        <select class="form-select" formControlName="parentDept">
          <option value="">Select</option>
          <option *ngFor="let p of parentDepartments">{{ p }}</option>
        </select>
      </div>

      <div class="col-md-6">
        <label>Password</label>
        <input type="password" class="form-control" formControlName="password">
      </div>

      <div class="col-md-6">
        <label>Child Department</label>
        <select class="form-select" formControlName="childDept">
          <option value="">Select</option>
          <option *ngFor="let c of childDepartments">{{ c }}</option>
        </select>
      </div>

      <div class="col-md-6">
        <label>Gender</label>
        <select class="form-select" formControlName="gender">
          <option value="">Select</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
      </div>

      <div class="col-md-6">
        <label>Role</label>
        <input type="text" class="form-control" formControlName="role">
      </div>

    </div>

    <div class="form-actions mt-4">
      <button type="button" class="btn btn-save" (click)="saveEmployee()">Save</button>
      <button type="button" class="btn btn-cancel" (click)="closeForm()">Cancel</button>
    </div>

  </form>


  <!-- =============================== -->
  <!-- EMPLOYEE TABLE -->
  <!-- =============================== -->
  <div class="table-responsive" *ngIf="!showForm && employees.length > 0">

    <table class="table table-striped table-hover custom-table mt-4">

      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Contact</th>
          <th>Email</th>
          <th>Department</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let emp of employees; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ emp.name }}</td>
          <td>{{ emp.contact }}</td>
          <td>{{ emp.email }}</td>
          <td>
            <span class="dept-tag">{{ emp.parentDept }}</span>
            <span class="dept-sub">{{ emp.childDept }}</span>
          </td>
          <td>{{ emp.role }}</td>
          <td>
            <button class="btn btn-delete" (click)="deleteEmployee(emp._id)">Delete</button>
          </td>
        </tr>
      </tbody>

    </table>
  </div>

</div>
